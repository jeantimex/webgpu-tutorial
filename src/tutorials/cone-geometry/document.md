# Cone Geometry

This tutorial generates a **procedural cone**, which is a cylinder with a top radius of zero. It supports adjustable height, base radius, segmentation, partial arcs, and optional caps, then renders both a lit surface and optional wireframe overlays.

**Key learning points:**

- How a cone is generated as a tapered cylinder.
- How to compute sloped normals for smooth lighting.
- How to add an optional bottom cap.
- How to render line‑list and barycentric wireframes.

## 1. Cone construction

We sweep a circle along height segments, but the top radius is fixed to zero:

```typescript
const radiusTop = 0;
const radiusBottom = radius;
const currentRadius = v * (radiusBottom - radiusTop) + radiusTop;
```

Vertices are generated by rotating around the Y axis:

```typescript
positions.push(
  currentRadius * sinTheta,
  -v * height + halfHeight,
  currentRadius * cosTheta
);
```

## 2. Normals for a cone

Because the cone slopes inward, normals are tilted using a slope factor:

```typescript
const slope = radiusBottom / height;
const nx = sinTheta;
const nz = cosTheta;
const ny = slope;
```

After normalization, these normals produce smooth shading on the cone surface.

## 3. Indices and tip handling

The cone side is built as a grid of quads. For the very top row, we skip one triangle to avoid degenerate geometry:

```typescript
if (y !== 0) {
  indices.push(a, b, d);
}
indices.push(b, c, d);
```

## 4. Bottom cap (optional)

If `openEnded` is false, we build a triangle fan for the bottom:

```typescript
positions.push(0, -halfHeight, 0);
// ring vertices around the base
indices.push(centerIndex, next, curr);
```

## 5. Wireframe overlay

Two wireframe modes are supported:

- **Line‑list wireframe** (fast, crisp edges, may z‑fight)
- **Barycentric wireframe** (smooth edges, no z‑fighting)

## 6. GUI controls

You can adjust radius, height, segments, arc settings, and toggle wireframe mode and animation in the GUI.

## Common pitfalls

- **Incorrect slope normals** causing uneven lighting.
- **Cap winding order** issues if the base looks inside‑out.
- **Z‑fighting** when line‑list wireframe has no depth bias.
